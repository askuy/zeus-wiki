<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>接口文档</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.3d288760.css" as="style"><link rel="preload" href="/assets/js/app.b4b403d7.js" as="script"><link rel="preload" href="/assets/js/6.4e2df9a5.js" as="script"><link rel="prefetch" href="/assets/js/10.ff76e523.js"><link rel="prefetch" href="/assets/js/11.3f04c2d8.js"><link rel="prefetch" href="/assets/js/12.a15c98a1.js"><link rel="prefetch" href="/assets/js/2.2e420bbc.js"><link rel="prefetch" href="/assets/js/3.67b19fbf.js"><link rel="prefetch" href="/assets/js/4.3d3f244e.js"><link rel="prefetch" href="/assets/js/5.2d0c1a82.js"><link rel="prefetch" href="/assets/js/7.10b1547c.js"><link rel="prefetch" href="/assets/js/8.7adf7edd.js"><link rel="prefetch" href="/assets/js/9.c0df0310.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3d288760.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <!----> </div> <div class="page"> <div class="content"><h1 id="接口文档"><a href="#接口文档" aria-hidden="true" class="header-anchor">#</a> 接口文档</h1> <blockquote><p>如果需要本地开发调试，请使用 <a href="https://documenter.getpostman.com/view/159835/S1LyTSN3?version=latest" target="_blank" rel="noopener noreferrer">Postman 接口文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p></blockquote> <h2 id="restful-接口标准"><a href="#restful-接口标准" aria-hidden="true" class="header-anchor">#</a> Restful 接口标准</h2> <p>为了统一接口，我们采用<code>Restful</code>进行描述接口</p> <h3 id="一、协议"><a href="#一、协议" aria-hidden="true" class="header-anchor">#</a> 一、协议</h3> <p>API 与用户端通讯使用HTTPS 协议</p> <h3 id="二、域名"><a href="#二、域名" aria-hidden="true" class="header-anchor">#</a> 二、域名</h3> <p>不同环境使用不同域名</p> <blockquote><ul><li>https://api.bullteam.local #开发测试环境</li> <li>https://api.bullteam.work # QA测试环境</li> <li>https://api.bullteam.life # 仿真回归环境</li> <li>https://api.bullteam.cn  #正式环境</li></ul></blockquote> <h3 id="三、版本"><a href="#三、版本" aria-hidden="true" class="header-anchor">#</a> 三、版本</h3> <p>将API的版本号放入URL,参考 <a href="https://developer.github.com/v3/media/#request-specific-version" target="_blank" rel="noopener noreferrer">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <blockquote><p>https://api.bullteam.cn<code>/v1/</code></p></blockquote> <h3 id="四、路径"><a href="#四、路径" aria-hidden="true" class="header-anchor">#</a> 四、路径</h3> <p>路径又称&quot;终点&quot;（endpoint），表示API的具体网址。</p> <p>在RESTful架构中，每个网址代表一种资源（resource），所以网址中不能有动词，只能有名词，而且所用的名词往往与数据库的表格名对应。一般来说，数据库中的表都是同种记录的&quot;集合&quot;（collection），所以API中的名词也应该使用复数。</p> <p>例如：</p> <div class="language- extra-class"><pre class="language-text"><code>- https://api.bullteam.cn/v1/users
- https://api.bullteam.cn/v1/menus
- https://api.bullteam.cn/v1/datas
</code></pre></div><h3 id="五、http-url-的动词"><a href="#五、http-url-的动词" aria-hidden="true" class="header-anchor">#</a> 五、HTTP(URL)的动词</h3> <div class="language- extra-class"><pre class="language-text"><code>- GET（SELECT）：从服务器取出资源（一项或多项）。
- POST（CREATE）：在服务器新建一个资源。
- PUT（UPDATE）：在服务器更新资源（客户端提供改变后的完整资源）。
- PATCH（UPDATE）：在服务器更新资源（客户端提供改变的属性）。
- DELETE（DELETE）：从服务器删除资源。
- HEAD：获取资源的元数据。
- OPTIONS：获取信息，关于资源的哪些属性是客户端可以改变的。
</code></pre></div><p>例子：</p> <div class="language- extra-class"><pre class="language-text"><code>- GET /users：列出所有用户
- POST /users：新建一个用户
- GET /users/&lt;ID&gt;：获取某个用户的信息
- PUT /users/&lt;ID&gt;：更新某个指定用户的信息（提供该用户的全部信息）
- PATCH /users/&lt;ID&gt;：更新某个指定用户的信息（提供该用户的部分信息）
- DELETE /users/&lt;ID&gt;：删除某个用户
</code></pre></div><h3 id="六、过滤信息（filtering）"><a href="#六、过滤信息（filtering）" aria-hidden="true" class="header-anchor">#</a> 六、过滤信息（Filtering）</h3> <div class="language- extra-class"><pre class="language-text"><code>- ?limit=10：指定返回记录的数量
- ?offset=10：指定返回记录的开始位置。
- ?page=2&amp;per_page=100：指定第几页，以及每页的记录数。
- ?sortby=name&amp;order=asc：指定返回结果按照哪个属性排序，以及排序顺序。
- ?users_id=1：指定筛选条件
</code></pre></div><h3 id="七、http状态码（status-codes）"><a href="#七、http状态码（status-codes）" aria-hidden="true" class="header-anchor">#</a> 七、HTTP状态码（Status Codes）</h3> <p>服务器向用户返回的状态码和提示信息，常见的有以下一些（方括号中是该状态码对应的HTTP动词）。</p> <div class="language- extra-class"><pre class="language-text"><code>- 200 OK - [GET]：服务器成功返回用户请求的数据，该操作是幂等的（Idempotent）。
- 201 CREATED - [POST/PUT/PATCH]：用户新建或修改数据成功。
- 202 Accepted - [*]：表示一个请求已经进入后台排队（异步任务）
- 204 NO CONTENT - [DELETE]：用户删除数据成功。
- 400 INVALID REQUEST - [POST/PUT/PATCH]：用户发出的请求有错误，服务器没有进行新建或修改数据的操作，该操作是幂等的。
- 401 Unauthorized - [*]：表示用户没有权限（令牌、用户名、密码错误）。
- 403 Forbidden - [*] 表示用户得到授权（与401错误相对），但是访问是被禁止的。
- 404 NOT FOUND - [*]：用户发出的请求针对的是不存在的记录，服务器没有进行操作，该操作是幂等的。
- 406 Not Acceptable - [GET]：用户请求的格式不可得（比如用户请求JSON格式，但是只有XML格式）。
- 410 Gone -[GET]：用户请求的资源被永久删除，且不会再得到的。
- 422 Unprocesable entity - [POST/PUT/PATCH] 当创建一个对象时，发生一个验证错误。
- 500 INTERNAL SERVER ERROR - [*]：服务器发生错误，用户将无法判断发出的请求是否成功。
</code></pre></div><h3 id="八、错误处理（error-handling）"><a href="#八、错误处理（error-handling）" aria-hidden="true" class="header-anchor">#</a> 八、错误处理（Error handling）</h3> <p>如果状态码是4xx，就应该向用户返回出错信息。一般来说，返回的信息中将error作为键名，出错信息作为键值即可。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    error<span class="token operator">:</span> <span class="token string">&quot;Invalid API key&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="九、返回结果"><a href="#九、返回结果" aria-hidden="true" class="header-anchor">#</a> 九、返回结果</h3> <p>针对不同操作，服务器向用户返回的结果应该符合以下规范。</p> <div class="language- extra-class"><pre class="language-text"><code>- GET /collection：返回资源对象的列表（数组）
- GET /collection/resource：返回单个资源对象
- POST /collection：返回新生成的资源对象
- PUT /collection/resource：返回完整的资源对象
- PATCH /collection/resource：返回完整的资源对象
- DELETE /collection/resource：返回一个空文档
</code></pre></div><h3 id="十、jwt-认证"><a href="#十、jwt-认证" aria-hidden="true" class="header-anchor">#</a> 十、JWT 认证</h3> <p>客户端收到服务器返回的 JWT，可以储存在 Cookie 里面，也可以储存在 localStorage。</p> <p>此后，客户端每次与服务器通信，都要带上这个 <code>JWT</code>。放在 HTTP 请求的头信息<code>Authorization</code>字段里面。</p> <div class="language- extra-class"><pre class="language-text"><code>Content-Type: application/json
Authorization: Bearer + token 
</code></pre></div><h3 id="十一、其他"><a href="#十一、其他" aria-hidden="true" class="header-anchor">#</a> 十一、其他</h3> <blockquote><p><strong>全部小写，用中划线连接</strong></p></blockquote> <h2 id="返回结构体"><a href="#返回结构体" aria-hidden="true" class="header-anchor">#</a> 返回结构体</h2> <p>成功</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    code<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    msg <span class="token operator">:</span> <span class="token string">&quot;done&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 请求状态描述，调试用</span>
    data <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 请求数据，对象或数组均可</span>
        user_id<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
        user_name<span class="token operator">:</span> <span class="token string">&quot;coso&quot;</span><span class="token punctuation">,</span>
        user_avatar_url<span class="token operator">:</span> <span class="token string">&quot;http://bullteam.cn/avatar.jpg&quot;</span>
        ...
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>失败</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">1009</span><span class="token punctuation">,</span><span class="token comment">// 业务自定义错误状态码</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;用户名或密码错误&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="参考资料"><a href="#参考资料" aria-hidden="true" class="header-anchor">#</a> 参考资料</h3> <p><a href="http://www.ruanyifeng.com/blog/2014/05/restful_api.html" target="_blank" rel="noopener noreferrer">阮一峰-RESTful API 设计指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br> <a href="https://www.vultr.com/api/" target="_blank" rel="noopener noreferrer">vultr api 文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br> <a href="https://lark-open.bytedance.net/document/ukTMukTMukTM/uADN14CM0UjLwQTN" target="_blank" rel="noopener noreferrer">飞书开发者文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.b4b403d7.js" defer></script><script src="/assets/js/6.4e2df9a5.js" defer></script>
  </body>
</html>
